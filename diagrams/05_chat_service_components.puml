@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

LAYOUT_TOP_DOWN()
LAYOUT_WITH_LEGEND()

title Chat Service Component Diagram

Container_Boundary(chatService, "Chat Service") {
    Component(grpcHandler, "gRPC Handler", "Go", "Handles gRPC requests")
    Component(chatServiceLogic, "Chat Service", "Go", "Business logic for chat and messages")
    Component(models, "Models", "Go", "Chat and Message domain models")
}

SystemDb_Ext(mongodb, "MongoDB", "Database")
System_Ext(rabbitmq, "RabbitMQ", "Message broker")

Rel(grpcHandler, chatServiceLogic, "Uses")
Rel(chatServiceLogic, models, "Uses")
Rel(chatServiceLogic, mongodb, "Reads/Writes")
Rel(chatServiceLogic, rabbitmq, "Publishes messages")

@enduml

