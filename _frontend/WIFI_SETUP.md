# ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Frontend ‡∏ö‡∏ô WiFi Network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

## ‚úÖ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏•‡πâ‡∏ß!

IP Address ‡∏Ç‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠: **172.20.10.14**

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (localhost)

‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡∏ó‡∏µ‡πà:

- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:30080 (Kubernetes NodePort)

### 2. ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô WiFi ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:

- **Frontend**: http://172.20.10.14:3000
- **Backend API**: http://172.20.10.14:30080 (Kubernetes NodePort)

## ‡∏Å‡∏≤‡∏£ Start Services

### Backend (‡πÉ‡∏ä‡πâ Tilt)

```bash
tilt up
```

### Frontend

```bash
cd _frontend
npm run dev
```

Frontend ‡∏à‡∏∞ listen ‡∏ö‡∏ô `0.0.0.0:3000` ‡∏ã‡∏∂‡πà‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô network

## Features ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ

### ‚úÖ Real-time Features

- **WebSocket**: ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô `ws://172.20.10.14:30080/chats/ws/`
- **Live Chat**: ‡∏™‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ö‡∏ö real-time
- **Online Users**: ‡∏î‡∏π‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡πÅ‡∏ö‡∏ö real-time
- **Notifications**: ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ö‡∏ö real-time

### ‚úÖ API Endpoints

‡∏ó‡∏∏‡∏Å API endpoint ‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô `http://172.20.10.14:30080`

### ‚öôÔ∏è ‡πÄ‡∏õ‡∏¥‡∏î Firewall (‡∏ó‡∏≥‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)

```powershell
# Run as Administrator
cd c:\chula\P3_T1\SA\lastetProject\sa-connext
.\open-firewall.ps1
```

## ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö IP Address ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì

‡∏´‡∏≤‡∏Å IP Address ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ WiFi ‡πÉ‡∏´‡∏°‡πà) ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ:

### Windows

```powershell
ipconfig | Select-String "IPv4"
```

### ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ IP ‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß

1. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `_frontend/.env.local`:

   ```
   NEXT_PUBLIC_BACKEND_URL=http://<NEW_IP>:30080
   ```

2. Restart Frontend:
   ```bash
   # ‡∏Å‡∏î Ctrl+C ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏¢‡∏∏‡∏î
   npm run dev
   ```

## Troubleshooting

### ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

1. ‡∏£‡∏±‡∏ô script ‡πÄ‡∏õ‡∏¥‡∏î Firewall: `.\open-firewall.ps1` (‡∏ï‡πâ‡∏≠‡∏á Run as Administrator)
2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô WiFi network ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
3. ‡∏•‡∏≠‡∏á ping ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á: `ping 172.20.10.14`
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà: `kubectl get pods`
5. ‡∏ó‡∏î‡∏™‡∏≠‡∏ö NodePort: ‡πÄ‡∏õ‡∏¥‡∏î browser ‡∏ó‡∏µ‡πà `http://localhost:30080/health`

### ‡∏ñ‡πâ‡∏≤ WebSocket ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Backend ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà
2. ‡∏î‡∏π Console ‡πÉ‡∏ô Browser (F12) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π WebSocket errors
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ token ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (login ‡πÉ‡∏´‡∏°‡πà‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)

## ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß

### Frontend Changes:

- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á `app/config/index.ts` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ environment variables
- ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏∏‡∏Å API routes ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `BACKEND_URL` ‡∏à‡∏≤‡∏Å config
- ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç WebSocket context ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `WS_URL` ‡∏à‡∏≤‡∏Å config
- ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Next.js ‡πÉ‡∏´‡πâ listen ‡∏ö‡∏ô `0.0.0.0` (‡∏ó‡∏∏‡∏Å network interfaces)
- ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ `.env.local` ‡∏î‡πâ‡∏ß‡∏¢ IP ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: `172.20.10.14`

### Backend Changes:

- ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç CORS ‡πÉ‡∏ô API Gateway ‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö origin ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° AllowHeaders ‡πÅ‡∏•‡∏∞ AllowMethods ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

### Kubernetes Changes:

- ‚úÖ API Gateway Service ‡πÉ‡∏ä‡πâ NodePort (30080)
- ‚úÖ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Tiltfile ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ port forwarding (‡πÉ‡∏ä‡πâ NodePort ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á)
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏õ‡∏¥‡∏î Firewall (`open-firewall.ps1`)

## ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

- üî¥ **‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ port 30080** ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà 8080 (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ä‡πâ Kubernetes NodePort)
- üî¥ **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î Firewall** ‡∏î‡πâ‡∏ß‡∏¢ `open-firewall.ps1` (Run as Administrator)
- üî¥ **IP Address ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ** ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ WiFi ‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠ restart router
- ‡∏ñ‡πâ‡∏≤ IP ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env.local` ‡πÅ‡∏•‡∏∞ restart frontend
